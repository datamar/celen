{% extends 'public/base.html' %}
{% load static %}
{% load humanize %}
{% load crispy_forms_tags %}
{% block titre %}{% if '/modifier/' in request.path %}Modifier l' {% else %}Nouvelle {% endif %}Implication{% endblock %}

{% block css_supp %}
{% endblock %}

{% block contenu %}
<form method="POST" enctype="multipart/form-data">
{% csrf_token %}
<div class="container min-vh-100">
    <div class="row mb-3">
        <div class="col">
            <h3>{% if '/modifier/' in request.path %}Modifier l' {% else %}Nouvelle {% endif %}Implication</h3>
        </div>
    </div>
    <div class="row mb-3">
        <div class="col-md-6">
            <div class="card shadow-lg bg-body">
                <div class="card-body">
                    {{ form.agent|as_crispy_field }}
                    {{ form.nature|as_crispy_field }}
                    {{ form.role|as_crispy_field }}
                    {{ form.contribution|as_crispy_field }}
                    <output for="id_contribution" id="rangeValue" aria-hidden="true"></output>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card shadow-lg bg-body">
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col">
                            {{ form.start_date_prevue|as_crispy_field }}
                            {{ form.end_date_prevue|as_crispy_field }}
                        </div>
                        <div class="col">
                            {{ form.start_date_reel|as_crispy_field }}
                            {{ form.end_date_reel|as_crispy_field }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mb-3">
        <div class="col">
            <div class="card shadow-lg bg-body">
                <div class="card-body py-2">
                    <div class="d-grid gap-2 d-md-block text-center">
                        <button class="btn btn-primary btn-sm" type="submit"><i class="bi bi-save me-2"></i>Cr√©er</button>
                        <button class="btn btn-secondary btn-sm" onclick="history.back();"><i class="bi bi-arrow-left-circle me-2"></i>Annuler</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</form>
{% endblock %}

{% block js_supp %}
<script>
  // This is a bootstrap 5 example script, please modify as needed
  const rangeInput = document.getElementById('id_contribution');
  const rangeOutput = document.getElementById('rangeValue');

  // Set initial value
  rangeOutput.textContent = rangeInput.value;

  rangeInput.addEventListener('input', function() {
    rangeOutput.textContent = this.value;
  });
</script>
{% endblock %}